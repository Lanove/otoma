<!DOCTYPE html>

<html>
  <head>
    <title>Parse Input and Format Ouput - AnyPicker</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta name="msapplication-tap-highlight" content="no" />

    <style type="text/css">
      body {
        margin: 0px;
      }

      .input-cont {
        width: 300px;
        padding: 20px;
      }

      input {
        width: 200px;
        height: 30px;
        padding: 3px 10px;

        margin-bottom: 16px;
      }
    </style>

    <link rel="stylesheet" type="text/css" href="../src/anypicker-font.css" />
    <link rel="stylesheet" type="text/css" href="../src/anypicker.css" />

    <link rel="stylesheet" type="text/css" href="../src/anypicker-ios.css" />
    <link
      rel="stylesheet"
      type="text/css"
      href="../src/anypicker-android.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../src/anypicker-windows.css"
    />

    <script type="text/javascript" src="vendors/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../src/anypicker.js"></script>

    <script type="text/javascript">
      var oArrData = [];
      function createDataSource() {
        var oArrDataNum = [7, 23, 59],
          iTempIndex1,
          iTempIndex2;
        for (iTempIndex1 = 0; iTempIndex1 < oArrDataNum.length; iTempIndex1++) {
          var iNum = oArrDataNum[iTempIndex1],
            oArrDataComp = [];
          for (iTempIndex2 = 0; iTempIndex2 < iNum + 1; iTempIndex2++) {
            oArrDataComp.push({
              val: iTempIndex2.toString(),
              label: iTempIndex2.toString(),
            });
          }
          oArrData.push(oArrDataComp);
        }
      }
      createDataSource();
      var oArrComponents = [
          {
            component: 0,
            name: "h",
            label: "Hari",
            width: "50%",
            textAlign: "center",
          },
          {
            component: 1,
            name: "j",
            label: "Jam",
            width: "20%",
            textAlign: "center",
          },
          {
            component: 2,
            name: "m",
            label: "Menit",
            width: "30%",
            textAlign: "center",
          },
        ],
        oArrDataSource = [
          {
            component: 0,
            data: oArrData[0],
          },
          {
            component: 1,
            data: oArrData[1],
          },
          {
            component: 2,
            data: oArrData[2],
          },
        ];

      function formatTimerInput(sElemValue) {
        var matches = sElemValue.match(/\d+/g);
        for (i in matches) {
          console.log(matches[i]);
          if (
            matches[i] === null ||
            matches[i] === undefined ||
            matches[i] === "" ||
            matches[i] === "0"
          )
            matches[i] = "0";
        }
        return matches;
      }

      function formatTimerOutput(oSelectedValues) {
        var stringBuffer = "",
          numberPal = ["h ", "j ", "m"];
        for (i in oSelectedValues.values) {
          if (
            oSelectedValues.values[i].val === null ||
            oSelectedValues.values[i].val === undefined ||
            oSelectedValues.values[i].val === "" ||
            oSelectedValues.values[i].val === "0"
          )
            stringBuffer += "0" + numberPal[i];
          else stringBuffer += oSelectedValues.values[i].val + numberPal[i];
        }
        return stringBuffer;
      }

      $(document).ready(function () {
        $("#ip-de").AnyPicker({
          mode: "select",
          showComponentLabel: true,
          components: oArrComponents,
          dataSource: oArrDataSource,
          parseInput: formatTimerInput,
          formatOutput: formatTimerOutput,
        });

        $("#ip-ios").AnyPicker({
          mode: "select",

          showComponentLabel: true,

          components: oArrComponents,

          dataSource: oArrDataSource,

          parseInput: cfParseInput,

          formatOutput: cfFormatOutput,

          theme: "iOS", // "Default", "iOS", "Android", "Windows"
        });

        $("#ip-android").AnyPicker({
          mode: "select",

          showComponentLabel: true,

          components: oArrComponents,

          dataSource: oArrDataSource,

          parseInput: cfParseInput,

          formatOutput: cfFormatOutput,

          theme: "Android", // "Default", "iOS", "Android", "Windows"
        });

        $("#ip-wp").AnyPicker({
          mode: "select",

          showComponentLabel: true,

          components: oArrComponents,

          dataSource: oArrDataSource,

          parseInput: cfParseInput,

          formatOutput: cfFormatOutput,

          theme: "Windows", // "Default", "iOS", "Android", "Windows"
        });
      });
    </script>
  </head>

  <body>
    <table class="input-cont">
      <tr>
        <td>Duration : (Default)</td>
      </tr>

      <tr>
        <td>
          <input type="text" id="ip-de" value="10h 5j 43m" readonly />
        </td>
      </tr>

      <tr>
        <td>Duration : (iOS)</td>
      </tr>

      <tr>
        <td>
          <input type="text" id="ip-ios" value="10 days 15 minutes" readonly />
        </td>
      </tr>

      <tr>
        <td>Duration : (Android)</td>
      </tr>

      <tr>
        <td>
          <input
            type="text"
            id="ip-android"
            value="10 days 15 minutes"
            readonly
          />
        </td>
      </tr>

      <tr>
        <td>Duration : (Windows)</td>
      </tr>

      <tr>
        <td>
          <input type="text" id="ip-wp" value="10 days 15 minutes" readonly />
        </td>
      </tr>
    </table>
  </body>
</html>
